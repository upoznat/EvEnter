databaseChangeLog:

  - changeSet:
      id: version 1.0
      author: poznanuros@gmail.com

      tagDatabase:
        tag: 1.0

  - changeSet:
      id: initial
      author: poznanuros@gmail.com
      changes:
        - comment: Initial database schema
          strip-comments: true
          sql: |

                create sequence seq_customers start with 1 increment by 1;
                create sequence seq_event start with 1 increment by 1;
                create sequence seq_ticket start with 1 increment by 1;

                create table customer (
                id number not null,
                username varchar(20) not null,
                password varchar(200) not null,
                identity_number varchar(20) not null,
                first_name varchar(20) not null,
                last_name varchar(20),
                address varchar(20),
                registration_date timestamp not null,
                email varchar(40),
                status varchar(20) not null,
                CONSTRAINT PK_CUSTOMER PRIMARY KEY (id)
                );

                comment on column customer.id is 'Jedinstveni id korisnika u sistemu';
                comment on column customer.username is 'Username korisnika';
                comment on column customer.identity_number is 'JMBG korisnika';

                CREATE TABLE event
                (
                id INTEGER NOT NULL,
                name varchar(20),
                location varchar(20),
                address varchar(20),
                date_created timestamp,
                date_modified timestamp,
                start_date timestamp not null,
                total_capacity integer not null,
                available_tickets integer not null,
                status varchar(20) not null,

                CONSTRAINT PK_EVENT PRIMARY KEY (id)
                );

                comment on column event.id is 'Jedinstveni id zahteva';
                comment on column event.name is 'Naziv dogadjaja';
                comment on column event.location is 'Adresa lokacije';
                comment on column event.location is 'Lokacija dogadjaja';
                comment on column event.date_created is 'Datum incijalnog snimanja zahteva';
                comment on column event.date_modified is 'Datum poslednje izmene';
                comment on column event.start_date is 'Datum odr≈æavanja dogadjaja';
                comment on column event.total_capacity is 'Ukupan broj karata za dogadjaj';
                comment on column event.available_tickets is 'Broj raspolozivih karata';
                comment on column event.status is 'Status dogadjaja';


                CREATE TABLE ticket
                     (
                     id INTEGER NOT NULL,
                     date_created timestamp,
                     date_modified timestamp,
                     start_date timestamp not null,
                     price number not null,
                     customer_id number,
                     event_id number,
                     status varchar(20) not null,
                     transaction_details varchar(20) not null,

                     CONSTRAINT PK_TICKET PRIMARY KEY (id),
                     constraint fk_customer_id FOREIGN key(customer_id) references customer(id),
                     constraint fk_event_id FOREIGN key(event_id) references event(id)
                     );

                     comment on column ticket.id is 'Jedinstveni id zahteva';
                     comment on column ticket.date_created is 'Datum incijalnog snimanja zahteva';
                     comment on column ticket.date_modified is 'Datum poslednje izmene';
                     comment on column ticket.start_date is 'Datum odrzavanja dogadjaja';
                     comment on column ticket.price is 'Cena ulaznice';
                     comment on column ticket.customer_id is 'Id korisnika koji je kupio kartu';
                     comment on column ticket.event_id is 'Id dogadjaja za koji se kupuje ulaznica';
                     comment on column ticket.status is 'Status ulaznice';
                     comment on column ticket.transaction_details is 'Podaci o transakciji - kupovine karte';




